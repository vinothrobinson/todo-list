(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{x:()=>p,L:()=>y});const t=()=>{let e=JSON.stringify(d),t=JSON.stringify(o);localStorage.setItem("tasks",e),localStorage.setItem("projects",t)},n=()=>{let e=localStorage.getItem("tasks"),t=localStorage.getItem("projects");return d=JSON.parse(e),o=JSON.parse(t),[d,o]};let o=[];class c{constructor(e,t){this.title=e,this.projectTasks=t}}const r=()=>{const e=document.querySelector(".project-display");e.replaceChildren();for(let t=0;t<o.length;t++){const n=document.createElement("div");n.classList.add("project"),n.innerHTML=`\n        <div class="title">${o[t].title}</div>\n        <div class="remove"></div>\n        `,e.appendChild(n)}document.querySelectorAll(".project").forEach((function(e,t){e.addEventListener("click",(function(){document.querySelector(".current-page").innerHTML=`${o[t].title}`,i(o[t].projectTasks)}))})),document.querySelectorAll(".remove").forEach((function(e,t){e.addEventListener("click",(function(){l(t)}))}))},l=e=>{let n=o[e].title;for(let e=0;e<d.length;e++)d[e].projectName===n&&d.splice(e,1);o.splice(e,1),t(),r(),document.querySelector(".current-page").innerHTML="Home",u()},i=e=>{const n=document.querySelector(".task-display");n.replaceChildren();for(let t=0;t<e.length;t++){const o=document.createElement("div");o.classList.add("task"),o.innerHTML=`\n        <div class="complete p-complete"></div>\n        <div class="task-info">\n            <div class="title">${e[t].title}</div>\n            <div class="description">${e[t].description}</div>\n        </div>\n        <div class="date">${e[t].dueDate}</div>\n        `,n.appendChild(o)}document.querySelectorAll(".complete").forEach((function(e,n){e.addEventListener("click",(function(e){let c=e.target.closest(".task");c=c.children[1],c=c.children[0],d.splice(n,1);let r=document.querySelector(".current-page"),l=o.findIndex((e=>e.title===r.innerHTML)),s=o[l].projectTasks,u=s.findIndex((e=>e.title===c.innerHTML));s.splice(u,1),t(),i(s)}))}))};let d=[];class s{constructor(e,t,n,o,c){this.title=e,this.description=t,this.dueDate=n,this.priority=o,this.projectName=c}}const u=()=>{const e=document.querySelector(".task-display");e.replaceChildren();for(let t=0;t<d.length;t++){const n=document.createElement("div");n.classList.add("task"),n.innerHTML=`\n        <div class="complete"></div>\n        <div class="task-info">\n            <div class="title">${d[t].title}</div>\n            <div class="description">${d[t].description}</div>\n        </div>\n        <div class="date">${d[t].dueDate}</div>\n        `,e.appendChild(n)}document.querySelectorAll(".complete").forEach((function(e,n){e.addEventListener("click",(function(e){if("Home"===d[n].projectName)d.splice(n,1),t(),u();else{let c=e.target.closest(".task");c=c.children[1],c=c.children[0];let r=o.findIndex((e=>e.title===d[n].projectName)),l=o[r].projectTasks,i=l.findIndex((e=>e.title===c.innerHTML));d.splice(n,1),l.splice(i,1),t(),u()}}))}))},a=document.querySelector(".new-todo");let p=!0;a.addEventListener("click",(function(){p?(document.querySelector("#new-todo-form").style.display="flex",p=!1):(document.querySelector("#new-todo-form").style.display="none",p=!0)})),document.querySelector("#new-todo-form").addEventListener("submit",(function(e){"Home"===document.querySelector(".current-page").innerHTML?(e.preventDefault(),(()=>{document.querySelector("#new-todo-form").style.display="none";let e=document.querySelector("#title").value,n=document.querySelector("#description").value,o=document.querySelector("#due-date").value;""===o&&(o="No Date");let c=document.querySelector("#priority").value;document.getElementById("new-todo-form").reset(),p=!0;let r=new s(e,n,o,c,"Home");d.push(r),t(),u()})()):(e.preventDefault(),(()=>{document.querySelector("#new-todo-form").style.display="none",p=!0;let e=document.querySelector(".current-page"),n=o.findIndex((t=>t.title===e.innerHTML)),c=document.querySelector("#title").value,r=document.querySelector("#description").value,l=document.querySelector("#due-date").value;""===l&&(l="No Date");let u=document.querySelector("#priority").value,a=o[n].title;document.getElementById("new-todo-form").reset();let m=new s(c,r,l,u,a);o[n].projectTasks.push(m),d.push(m),t(),i(o[n].projectTasks)})())}));const m=document.querySelector(".new-project");let y=!0;m.addEventListener("click",(function(){y?(document.querySelector("#new-project-form").style.display="flex",y=!1):(document.querySelector("#new-project-form").style.display="none",y=!0)})),document.querySelector("#new-project-form").addEventListener("submit",(function(e){e.preventDefault(),(()=>{document.querySelector("#new-project-form").style.display="none",y=!0;let e=document.querySelector("#project-title").value,n=new c(e,[]);o.push(n),t(),r()})()})),document.querySelector(".home-button").addEventListener("click",(function(){document.querySelector(".current-page").innerHTML="Home",u()})),window.history.replaceState&&window.history.replaceState(null,null,window.location.href),window.onload=function(){console.log("Onload function is being run"),d=n()[0],o=n()[1],null!==d&&null!==o||(d=[],o=[]),u(),r()}})();