(()=>{"use strict";const e=()=>{let e=JSON.stringify(i),t=JSON.stringify(o);localStorage.setItem("tasks",e),localStorage.setItem("projects",t)},t=()=>{let e=localStorage.getItem("tasks"),t=localStorage.getItem("projects");i=JSON.parse(e),o=JSON.parse(t)};let o=[];class n{constructor(e,t){this.title=e,this.projectTasks=t}}const c=()=>{const e=document.querySelector(".project-display");e.replaceChildren();for(let t=0;t<o.length;t++){const n=document.createElement("div");n.classList.add("project"),n.style.backgroundColor="#e2e8f0",n.innerHTML=`\n        <div class="title">${o[t].title}</div>\n        <div class="remove">X</div>\n        `,e.appendChild(n)}document.querySelectorAll(".project").forEach((function(e,t){e.addEventListener("click",(function(){document.querySelector(".current-page").innerHTML=`${o[t].title}`,l(o[t].projectTasks)}))})),document.querySelectorAll(".remove").forEach((function(e,t){e.addEventListener("click",(function(){r(t)}))}))},r=t=>{let n=o[t].title;for(let e=0;e<i.length;e++)i[e].projectName===n&&i.splice(e,1);o.splice(t,1),e(),c(),document.querySelector(".current-page").innerHTML="Home",s()},l=t=>{const n=document.querySelector(".task-display");n.replaceChildren();for(let e=0;e<t.length;e++){const o=document.createElement("div");o.classList.add("task"),o.style.backgroundColor="#e2e8f0",o.innerHTML=`\n        <div class="complete p-complete"></div>\n        <div class="task-info">\n            <div class="title">${t[e].title}</div>\n            <div class="description">${t[e].description}</div>\n        </div>\n        <div class="date">${t[e].dueDate}</div>\n        `,n.appendChild(o)}document.querySelectorAll(".complete").forEach((function(t,n){t.addEventListener("click",(function(t){let c=t.target.closest(".task");c=c.children[1],c=c.children[0],i.splice(n,1);let r=document.querySelector(".current-page"),d=o.findIndex((e=>e.title===r.innerHTML)),s=o[d].projectTasks,u=s.findIndex((e=>e.title===c.innerHTML));s.splice(u,1),e(),l(s)}))}))};let i=[];class d{constructor(e,t,o,n,c){this.title=e,this.description=t,this.dueDate=o,this.priority=n,this.projectName=c}}const s=()=>{const t=document.querySelector(".task-display");t.replaceChildren();for(let e=0;e<i.length;e++){const o=document.createElement("div");o.classList.add("task"),o.style.backgroundColor="#e2e8f0",o.innerHTML=`\n        <div class="complete"></div>\n        <div class="task-info">\n            <div class="title">${i[e].title}</div>\n            <div class="description">${i[e].description}</div>\n        </div>\n        <div class="date">${i[e].dueDate}</div>\n        `,t.appendChild(o)}document.querySelectorAll(".complete").forEach((function(t,n){t.addEventListener("click",(function(t){if("Home"===i[n].projectName)i.splice(n,1),e(),s();else{let c=t.target.closest(".task");c=c.children[1],c=c.children[0];let r=o.findIndex((e=>e.title===i[n].projectName)),l=o[r].projectTasks,d=l.findIndex((e=>e.title===c.innerHTML));i.splice(n,1),l.splice(d,1),e(),s()}}))}))},u=document.querySelector(".new-todo");let a=!0;u.addEventListener("click",(function(){a?(document.querySelector("#new-todo-form").style.display="flex",a=!1):(document.querySelector("#new-todo-form").style.display="none",a=!0)})),document.querySelector("#new-todo-form").addEventListener("submit",(function(t){"Home"===document.querySelector(".current-page").innerHTML?(t.preventDefault(),(()=>{document.querySelector("#new-todo-form").style.display="none";let t=document.querySelector("#title").value,o=document.querySelector("#description").value,n=document.querySelector("#due-date").value;""===n&&(n="No Date");let c=document.querySelector("#priority").value,r=new d(t,o,n,c,"Home");i.push(r),e(),s()})()):(t.preventDefault(),(()=>{document.querySelector("#new-todo-form").style.display="none";let t=document.querySelector(".current-page"),n=o.findIndex((e=>e.title===t.innerHTML)),c=document.querySelector("#title").value,r=document.querySelector("#description").value,s=document.querySelector("#due-date").value;""===s&&(s="No Date");let u=document.querySelector("#priority").value,a=o[n].title,p=new d(c,r,s,u,a);o[n].projectTasks.push(p),i.push(p),e(),l(o[n].projectTasks)})())}));const p=document.querySelector(".new-project");let m=!0;p.addEventListener("click",(function(){m?(document.querySelector("#new-project-form").style.display="flex",m=!1):(document.querySelector("#new-project-form").style.display="none",m=!0)})),document.querySelector("#new-project-form").addEventListener("submit",(function(t){t.preventDefault(),(()=>{document.querySelector("#new-project-form").style.display="none";let t=document.querySelector("#project-title").value,r=new n(t,[]);o.push(r),e(),c()})()})),document.querySelector(".home-button").addEventListener("click",(function(){document.querySelector(".current-page").innerHTML="Home",s()})),window.history.replaceState&&window.history.replaceState(null,null,window.location.href),-1==document.cookie.indexOf("mycookie")?(document.cookie="mycookie=1",t(),s(),c()):(t(),s(),c())})();